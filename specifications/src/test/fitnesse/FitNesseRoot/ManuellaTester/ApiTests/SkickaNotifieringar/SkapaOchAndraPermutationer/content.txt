!contents -R2 -g -p -f -h

!2 Testa flödet Skapa ukast -> notifiering HAN1, Ändra och spara -> notifiering HAN11


!3 Börja med att rensa eventuella gamla notifieringar
| webcert rest utils | 
| reset? |
| true |


!3 Skapa utkast och ändra i diagnos-relaterade fält, vilket ska ge notifiering HAN11

!4 Logga in och skapa ett nytt intygsutkast
| skapa utkast med fake inloggning |
| patientPersonnummer | patientFornamn | patientEfternamn | utkastCreated? | utkastId? |
| 19000101-9801       | Test           | Testorsson       |           true | $utkastId=|

!4 Populera och spara utkastet
| spara utkast |
| patientPersonnummer | patientFornamn | patientEfternamn | hsaId | namn | enhetId             | kodverk   | intygId    | intygTyp | diagnosKod| diagnosBeskrivning1  | komplett | utkastSparat? | 
| 19000101-9801 | Test | Testorsson | SE4815162344-1B01 | Ivar Integration | SE4815162344-1A02 | ICD_10_SE | $utkastId   | fk7263  | S50       | Kontusion på armbåge | true     | true         | 

!4 Verifiera att notifieringar mottogs av notifierings-stubben
| verifiera notifiering | 
| id         | kod  | handelseSkapad?   |
| $utkastId  | HAN1 | true              |
| $utkastId  | HAN11| true              |

!4 Ta bort utkastet
| ta bort utkast |
| utkastId |
| $utkastId |

!3 reset
| webcert rest utils | 
| reset? |
| true |


!3 Skapa utkast och spara utan att ändra diagnos-info, vilket INTE ska ge notifiering HAN11

!4 Logga in och skapa ett nytt intygsutkast
| skapa utkast med fake inloggning |
| patientPersonnummer | patientFornamn | patientEfternamn | utkastCreated? | utkastId? |
| 19000101-9801       | Test           | Testorsson       |           true | $utkastId=|

!4 Populera och spara utkastet
| spara utkast |
| patientPersonnummer | patientFornamn | patientEfternamn | hsaId | namn | enhetId             | kodverk   | intygId    | intygTyp | komplett |  utkastSparat? | 
| 19000101-9801 | Test | Testorsson | SE4815162344-1B01 | Ivar Integration | SE4815162344-1A02 | ICD_10_SE | $utkastId   | fk7263  | false     | true        | 

!4 Verifiera att notifieringar mottogs av notifierings-stubben
| verifiera notifiering | 
| id         | kod  | handelseSkapad?   | timeOut |
| $utkastId  | HAN1 | true              | 1000    |
| $utkastId  | HAN11| false             | 1000    |

!4 Ta bort utkastet
| ta bort utkast |
| utkastId |
| $utkastId |

!3 reset
| webcert rest utils | 
| reset? |
| true |




!3 Skapa utkast och ändra i sjukskrivningsperiod, vilket ska ge notifiering HAN11

!4 Logga in och skapa ett nytt intygsutkast
| skapa utkast med fake inloggning |
| patientPersonnummer | patientFornamn | patientEfternamn | utkastCreated? | utkastId? |
| 19000101-9801       | Test           | Testorsson       |           true | $utkastId=|

!4 Populera och spara utkastet
| spara utkast |
| patientPersonnummer | patientFornamn | patientEfternamn | hsaId | namn | enhetId             | kodverk   | intygId    | intygTyp | nedsattMed100                                            | komplett | utkastSparat?  | 
| 19000101-9801 | Test | Testorsson | SE4815162344-1B01 | Ivar Integration | SE4815162344-1A02 | ICD_10_SE | $utkastId  | fk7263   | "nedsattMed100":{"from":"2014-04-15","tom":"2014-05-15"} | true     | true | 

!4 Verifiera att notifieringar mottogs av notifierings-stubben
| verifiera notifiering | 
| id         | kod  | handelseSkapad?   |
| $utkastId  | HAN1 | true              |
| $utkastId  | HAN11| true              |

!4 Ta bort utkastet
| ta bort utkast |
| utkastId |
| $utkastId |


!3 Rensa notifieringar
| webcert rest utils | 
| reset? |
| true |



